<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano Thư Giãn - Minimalism Player</title>
    <!-- Nhúng Font chữ Google -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Nhúng Icon từ FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* CSS VARIABLES - Dễ dàng tùy chỉnh màu sắc */
        :root {
            --primary-color: #ffffff;
            --accent-color: #a29bfe;
            --bg-gradient: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--primary-color);
            overflow: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* CONTAINER CHÍNH */
        .player-card {
            width: 380px;
            padding: 30px;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            box-shadow: 0 25px 45px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            z-index: 1;
        }

        /* ĐĨA XOAY / THUMBNAIL */
        .img-area {
            width: 200px;
            height: 200px;
            margin: 0 auto 25px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(255,255,255,0.1);
            border: 4px solid var(--glass-border);
            position: relative;
        }

        .img-area img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        /* Hiệu ứng xoay khi nhạc chạy */
        .img-area.playing {
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* THÔNG TIN BÀI HÁT */
        .song-details {
            margin-bottom: 30px;
        }

        .song-details .name {
            font-size: 1.4rem;
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .song-details .artist {
            font-size: 0.9rem;
            opacity: 0.7;
            font-weight: 300;
        }

        /* THANH TIẾN TRÌNH */
        .progress-area {
            height: 5px;
            width: 100%;
            background: rgba(255,255,255,0.1);
            border-radius: 50px;
            cursor: pointer;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: inherit;
            width: 0%;
            position: relative;
            border-radius: inherit;
            background: var(--accent-color);
            box-shadow: 0 0 10px var(--accent-color);
            transition: width 0.1s linear;
        }

        .timer {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            opacity: 0.6;
            margin-bottom: 25px;
        }

        /* ĐIỀU KHIỂN */
        .controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .controls i {
            font-size: 1.2rem;
            cursor: pointer;
            transition: 0.3s;
            color: rgba(255,255,255,0.8);
        }

        .controls i:hover {
            color: var(--accent-color);
            transform: scale(1.1);
        }

        .play-pause {
            width: 65px;
            height: 65px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #24243e;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .play-pause i {
            font-size: 1.8rem;
            color: #24243e;
        }

        /* ÂM LƯỢNG */
        .volume-container {
            margin-top: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-container i {
            font-size: 0.9rem;
            opacity: 0.6;
        }

        #volume-slider {
            flex: 1;
            height: 4px;
            accent-color: var(--accent-color);
            cursor: pointer;
        }

        /* DANH SÁCH PHÁT */
        .playlist {
            margin-top: 25px;
            text-align: left;
            max-height: 150px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .playlist::-webkit-scrollbar {
            width: 4px;
        }
        .playlist::-webkit-scrollbar-thumb {
            background: var(--glass-border);
            border-radius: 10px;
        }

        .song-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
            border-bottom: 1px solid var(--glass-border);
        }

        .song-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .song-item.active {
            color: var(--accent-color);
            background: rgba(255,255,255,0.08);
        }

        .song-item span {
            font-size: 0.85rem;
        }

        /* RESPONSIVE */
        @media (max-width: 400px) {
            .player-card {
                width: 90%;
                padding: 20px;
            }
            .img-area {
                width: 150px;
                height: 150px;
            }
        }
    </style>
</head>
<body>

    <div class="player-card">
        <!-- Ảnh đĩa xoay -->
        <div class="img-area">
            <img src="https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?q=80&w=500&auto=format&fit=crop" alt="Piano Cover" id="track-art">
        </div>

        <!-- Thông tin bài hát -->
        <div class="song-details">
            <p class="name" id="track-name">Midnight Piano</p>
            <p class="artist" id="track-artist-name">Relaxing Melody</p>
        </div>

        <!-- Thanh tiến trình -->
        <div class="progress-area" id="progress-area">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="timer">
            <span class="current" id="current-time">0:00</span>
            <span class="duration" id="duration">0:00</span>
        </div>

        <!-- Bộ điều khiển -->
        <div class="controls">
            <i class="fa-solid fa-repeat" title="Lặp lại" id="repeat-btn"></i>
            <i class="fa-solid fa-backward-step" id="prev-btn"></i>
            <div class="play-pause" id="play-pause-btn">
                <i class="fa-solid fa-play"></i>
            </div>
            <i class="fa-solid fa-forward-step" id="next-btn"></i>
            <i class="fa-solid fa-list" title="Danh sách" id="list-btn"></i>
        </div>

        <!-- Thanh âm lượng -->
        <div class="volume-container">
            <i class="fa-solid fa-volume-low"></i>
            <input type="range" id="volume-slider" min="0" max="100" value="70">
            <i class="fa-solid fa-volume-high"></i>
        </div>

        <!-- Playlist -->
        <div class="playlist" id="playlist">
            <!-- Sẽ được render bởi JS -->
        </div>
    </div>

    <!-- Audio Element -->
    <audio id="main-audio" src=""></audio>

    <script>
        const musicList = [
            {
                name: "Thanh Âm Đêm Khuya",
                artist: "Piano Solo",
                img: "https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?q=80&w=500&auto=format&fit=crop",
                src: "https://www.chosic.com/wp-content/uploads/2021/04/Rainy-Day-Background-Music-Piano-And-Rain.mp3"
            },
            {
                name: "Giấc Mơ Êm Đềm",
                artist: "Lofi Piano",
                img: "https://images.unsplash.com/photo-1552422535-c45813c61732?q=80&w=500&auto=format&fit=crop",
                src: "https://www.chosic.com/wp-content/uploads/2020/07/The-Soft-Piano-Music.mp3"
            },
            {
                name: "Hoàng Hôn Tĩnh Lặng",
                artist: "Classical",
                img: "https://images.unsplash.com/photo-1465821185615-20b3c2fbf41b?q=80&w=500&auto=format&fit=crop",
                src: "https://www.chosic.com/wp-content/uploads/2021/05/Lonely-Piano-Search-No-More.mp3"
            }
        ];

        const container = document.querySelector(".player-card"),
        musicImg = container.querySelector("#track-art"),
        musicName = container.querySelector("#track-name"),
        musicArtist = container.querySelector("#track-artist-name"),
        mainAudio = container.querySelector("#main-audio"),
        playPauseBtn = container.querySelector("#play-pause-btn"),
        prevBtn = container.querySelector("#prev-btn"),
        nextBtn = container.querySelector("#next-btn"),
        progressArea = container.querySelector("#progress-area"),
        progressBar = container.querySelector("#progress-bar"),
        volumeSlider = container.querySelector("#volume-slider"),
        playlistContainer = container.querySelector("#playlist");

        let musicIndex = 0;
        let isPlaying = false;

        window.addEventListener("load", () => {
            loadMusic(musicIndex);
            renderPlaylist();
        });

        // Hàm tải nhạc
        function loadMusic(index){
            musicName.innerText = musicList[index].name;
            musicArtist.innerText = musicList[index].artist;
            musicImg.src = musicList[index].img;
            mainAudio.src = musicList[index].src;
            updatePlaylistSelection();
        }

        // Play/Pause
        function playMusic(){
            isPlaying = true;
            playPauseBtn.querySelector("i").classList.replace("fa-play", "fa-pause");
            container.querySelector(".img-area").classList.add("playing");
            mainAudio.play();
        }

        function pauseMusic(){
            isPlaying = false;
            playPauseBtn.querySelector("i").classList.replace("fa-pause", "fa-play");
            container.querySelector(".img-area").classList.remove("playing");
            mainAudio.pause();
        }

        playPauseBtn.addEventListener("click", () => {
            isPlaying ? pauseMusic() : playMusic();
        });

        // Chuyển bài
        nextBtn.addEventListener("click", () => {
            musicIndex = (musicIndex + 1) % musicList.length;
            loadMusic(musicIndex);
            playMusic();
        });

        prevBtn.addEventListener("click", () => {
            musicIndex = (musicIndex - 1 + musicList.length) % musicList.length;
            loadMusic(musicIndex);
            playMusic();
        });

        // Cập nhật thanh tiến trình
        mainAudio.addEventListener("timeupdate", (e) => {
            const currentTime = e.target.currentTime;
            const duration = e.target.duration;
            let progressWidth = (currentTime / duration) * 100;
            progressBar.style.width = `${progressWidth}%`;

            let musicCurrentTime = container.querySelector("#current-time"),
                musicDuration = container.querySelector("#duration");

            mainAudio.addEventListener("loadeddata", () => {
                let audioDuration = mainAudio.duration;
                let totalMin = Math.floor(audioDuration / 60);
                let totalSec = Math.floor(audioDuration % 60);
                if(totalSec < 10) totalSec = `0${totalSec}`;
                musicDuration.innerText = `${totalMin}:${totalSec}`;
            });

            let currentMin = Math.floor(currentTime / 60);
            let currentSec = Math.floor(currentTime % 60);
            if(currentSec < 10) currentSec = `0${currentSec}`;
            musicCurrentTime.innerText = `${currentMin}:${currentSec}`;
        });

        // Tua nhạc
        progressArea.addEventListener("click", (e) => {
            let progressWidthval = progressArea.clientWidth;
            let clickedOffSetX = e.offsetX;
            let songDuration = mainAudio.duration;
            mainAudio.currentTime = (clickedOffSetX / progressWidthval) * songDuration;
            playMusic();
        });

        // Âm lượng
        volumeSlider.addEventListener("input", (e) => {
            mainAudio.volume = e.target.value / 100;
        });

        // Render Playlist
        function renderPlaylist() {
            playlistContainer.innerHTML = "";
            musicList.forEach((song, index) => {
                let div = document.createElement("div");
                div.className = `song-item ${index === musicIndex ? 'active' : ''}`;
                div.innerHTML = `
                    <span>${song.name}</span>
                    <i class="fa-solid fa-music"></i>
                `;
                div.onclick = () => {
                    musicIndex = index;
                    loadMusic(musicIndex);
                    playMusic();
                };
                playlistContainer.appendChild(div);
            });
        }

        function updatePlaylistSelection() {
            const items = playlistContainer.querySelectorAll(".song-item");
            items.forEach((item, index) => {
                if(index === musicIndex) item.classList.add("active");
                else item.classList.remove("active");
            });
        }

        // Tự động chuyển bài khi hết
        mainAudio.addEventListener("ended", () => {
            nextBtn.click();
        });
    </script>
</body>
</html>
